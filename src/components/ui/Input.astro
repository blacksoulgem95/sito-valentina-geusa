---
interface Props {
    class?: string;
    type?: 'text' | 'email' | 'password' | 'number' | 'tel' | 'url' | 'search' | 'date' | 'time';
    name?: string;
    id?: string;
    value?: string | number;
    placeholder?: string;
    required?: boolean;
    disabled?: boolean;
    readonly?: boolean;
    size?: 'sm' | 'normal' | 'lg';
    variant?: 'default' | 'bordered' | 'secondary' | 'tertiary' | 'subtle';
    error?: boolean;
    success?: boolean;
    icon?: string;
    iconPosition?: 'left' | 'right';
    min?: number;
    max?: number;
    step?: number;
    pattern?: string;
    autocomplete?: string;
}

const {
    class: className,
    type = 'text',
    name,
    id,
    value,
    placeholder,
    required = false,
    disabled = false,
    readonly = false,
    size = 'normal',
    variant = 'default',
    error = false,
    success = false,
    icon,
    iconPosition = 'left',
    min,
    max,
    step,
    pattern,
    autocomplete,
} = Astro.props;

// Costruisci le classi dell'input
const inputClasses = [
    'input',
    size !== 'normal' && `input-${size}`,
    variant !== 'default' && `input-${variant}`,
    error && 'input-error',
    success && 'input-success',
    icon && iconPosition === 'left' && 'input-with-icon-left',
    icon && iconPosition === 'right' && 'input-with-icon-right',
    className,
].filter(Boolean);

const hasIcon = !!icon;
---

{hasIcon ? (
    <div class="input-group">
        {iconPosition === 'left' && (
            <span class="input-group-icon" set:html={icon} />
        )}

        <input
            type={type}
            name={name}
            id={id}
            value={value}
            placeholder={placeholder}
            required={required}
            disabled={disabled}
            readonly={readonly}
            min={min}
            max={max}
            step={step}
            pattern={pattern}
            autocomplete={autocomplete}
            class:list={inputClasses}
        />

        {iconPosition === 'right' && (
            <span class="input-group-icon-right" set:html={icon} />
        )}
    </div>
) : (
    <input
        type={type}
        name={name}
        id={id}
        value={value}
        placeholder={placeholder}
        required={required}
        disabled={disabled}
        readonly={readonly}
        min={min}
        max={max}
        step={step}
        pattern={pattern}
        autocomplete={autocomplete}
        class:list={inputClasses}
    />
)}
